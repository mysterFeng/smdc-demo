# 前端下单功能测试指南

## 测试准备

### 1. 初始化测试数据
在微信开发者工具的控制台中运行以下代码：

```javascript
// 复制并运行初始化测试数据.js中的内容
// 或者直接运行：
initAllTestData();
```

### 2. 确保后端服务运行
```bash
# 启动Spring Boot后端服务
mvn spring-boot:run
```

## 测试步骤

### 第一步：基础功能测试

#### 1.1 购物车页面加载
- [ ] 打开购物车页面
- [ ] 检查商品列表是否正确显示
- [ ] 检查价格计算是否正确
- [ ] 检查数量控制按钮是否可用

#### 1.2 商品操作测试
- [ ] 测试增加商品数量
- [ ] 测试减少商品数量
- [ ] 测试删除商品
- [ ] 检查价格实时更新

### 第二步：地址管理测试

#### 2.1 地址选择功能
- [ ] 点击"配送地址"区域
- [ ] 检查是否跳转到地址选择页面
- [ ] 选择任意地址
- [ ] 返回购物车页面，检查地址是否更新

#### 2.2 地址验证功能
- [ ] 不选择地址直接点击结算
- [ ] 检查是否显示"请选择配送地址"提示
- [ ] 选择地址后再次点击结算
- [ ] 检查是否正常跳转到订单确认页面

### 第三步：优惠券功能测试

#### 3.1 优惠券选择
- [ ] 点击"选择优惠券"
- [ ] 检查优惠券弹窗是否显示
- [ ] 选择任意优惠券
- [ ] 检查价格是否重新计算
- [ ] 检查优惠券信息是否正确显示

#### 3.2 优惠券筛选
- [ ] 清空购物车，添加少量商品（总价<30元）
- [ ] 点击"选择优惠券"
- [ ] 检查是否显示"暂无可用优惠券"
- [ ] 添加更多商品（总价>30元）
- [ ] 再次点击"选择优惠券"
- [ ] 检查是否显示可用优惠券

#### 3.3 优惠券清除
- [ ] 选择优惠券后
- [ ] 点击"清除"按钮
- [ ] 检查优惠券是否被清除
- [ ] 检查价格是否重新计算

### 第四步：备注功能测试

#### 4.1 备注输入
- [ ] 在备注输入框中输入文字
- [ ] 检查输入是否正常
- [ ] 检查备注内容是否正确保存

### 第五步：结算流程测试

#### 5.1 完整下单流程
- [ ] 确保购物车有商品
- [ ] 选择配送地址
- [ ] 选择优惠券（可选）
- [ ] 输入备注（可选）
- [ ] 点击"立即结算"
- [ ] 检查是否跳转到订单确认页面

#### 5.2 订单确认页面
- [ ] 检查订单信息是否正确显示
- [ ] 检查地址信息是否正确
- [ ] 检查商品列表是否正确
- [ ] 检查价格计算是否正确
- [ ] 点击"提交订单"
- [ ] 检查订单是否创建成功

## 测试用例

### 测试用例1：基础下单流程
**前置条件**：购物车有商品，有可用地址
**测试步骤**：
1. 打开购物车页面
2. 选择配送地址
3. 点击"立即结算"
4. 确认订单信息
5. 提交订单

**预期结果**：订单创建成功，跳转到订单列表页面

### 测试用例2：优惠券使用
**前置条件**：购物车商品总价>30元
**测试步骤**：
1. 打开购物车页面
2. 点击"选择优惠券"
3. 选择"满30减5"优惠券
4. 检查价格计算
5. 选择地址并结算

**预期结果**：优惠券生效，价格正确计算

### 测试用例3：地址验证
**前置条件**：购物车有商品
**测试步骤**：
1. 打开购物车页面
2. 不选择地址
3. 直接点击"立即结算"

**预期结果**：显示"请选择配送地址"提示

### 测试用例4：优惠券筛选
**前置条件**：购物车商品总价<30元
**测试步骤**：
1. 打开购物车页面
2. 点击"选择优惠券"

**预期结果**：显示"暂无可用优惠券"提示

## 常见问题排查

### 问题1：优惠券弹窗不显示
**可能原因**：
- 订单金额不足，没有可用优惠券
- JavaScript代码错误

**解决方法**：
1. 检查控制台是否有错误信息
2. 确认订单金额是否满足优惠券条件
3. 检查优惠券数据是否正确

### 问题2：地址选择不生效
**可能原因**：
- 地址数据格式不正确
- 页面跳转参数错误

**解决方法**：
1. 检查地址数据结构
2. 确认地址选择页面的返回逻辑
3. 检查页面间数据传递

### 问题3：价格计算错误
**可能原因**：
- 数据类型转换问题
- 计算逻辑错误

**解决方法**：
1. 检查价格数据类型
2. 确认计算逻辑
3. 添加调试日志

### 问题4：结算按钮无响应
**可能原因**：
- 验证逻辑阻止了结算
- 网络请求失败

**解决方法**：
1. 检查验证逻辑
2. 确认网络连接
3. 查看控制台错误信息

## 性能测试

### 1. 页面加载性能
- [ ] 购物车页面加载时间 < 2秒
- [ ] 优惠券弹窗显示时间 < 500ms
- [ ] 地址选择页面跳转时间 < 1秒

### 2. 交互响应性能
- [ ] 按钮点击响应时间 < 200ms
- [ ] 价格计算响应时间 < 100ms
- [ ] 页面切换响应时间 < 500ms

## 兼容性测试

### 1. 设备兼容性
- [ ] iPhone 6/7/8/11/12/13/14
- [ ] Android 各种尺寸设备
- [ ] 不同分辨率屏幕

### 2. 微信版本兼容性
- [ ] 微信 7.0+
- [ ] 微信 8.0+
- [ ] 微信 9.0+

## 测试报告模板

### 测试结果记录
```
测试日期：2025-07-06
测试人员：[姓名]
测试环境：[设备型号 + 微信版本]

功能模块：前端下单功能
测试结果：
- 购物车功能：✅ 通过 / ❌ 失败
- 地址管理：✅ 通过 / ❌ 失败
- 优惠券功能：✅ 通过 / ❌ 失败
- 结算流程：✅ 通过 / ❌ 失败

发现的问题：
1. [问题描述]
2. [问题描述]

建议改进：
1. [改进建议]
2. [改进建议]
```

## 自动化测试建议

### 1. 单元测试
- 价格计算函数测试
- 数据验证函数测试
- 优惠券筛选逻辑测试

### 2. 集成测试
- 页面间数据传递测试
- API接口调用测试
- 用户操作流程测试

### 3. E2E测试
- 完整下单流程测试
- 异常情况处理测试
- 性能压力测试

---

**测试指南版本**: v1.0  
**创建时间**: 2025-07-06  
**更新状态**: ✅ 已完成 