<view class="coupons-container">
  <!-- çŠ¶æ€åˆ‡æ¢ -->
  <view class="tab-section">
    <view class="tab-item {{currentTab === 0 ? 'active' : ''}}" bindtap="switchTab" data-index="0">
      <text class="tab-text">å¯ç”¨ä¼˜æƒ åˆ¸</text>
      <text class="tab-count" wx:if="{{availableCount > 0}}">{{availableCount}}</text>
    </view>
    <view class="tab-item {{currentTab === 1 ? 'active' : ''}}" bindtap="switchTab" data-index="1">
      <text class="tab-text">å·²ä½¿ç”¨</text>
      <text class="tab-count" wx:if="{{usedCount > 0}}">{{usedCount}}</text>
    </view>
    <view class="tab-item {{currentTab === 2 ? 'active' : ''}}" bindtap="switchTab" data-index="2">
      <text class="tab-text">å·²è¿‡æœŸ</text>
      <text class="tab-count" wx:if="{{expiredCount > 0}}">{{expiredCount}}</text>
    </view>
  </view>

  <!-- ä¼˜æƒ åˆ¸åˆ—è¡¨ -->
  <view class="coupons-list">
    <view class="coupon-item {{item.status !== 0 ? 'disabled' : ''}}" 
          wx:for="{{coupons}}" 
          wx:key="id"
          bindtap="useCoupon"
          data-coupon="{{item}}">
      
      <!-- ä¼˜æƒ åˆ¸å·¦ä¾§ -->
      <view class="coupon-left">
        <view class="coupon-value">
          <text class="value-symbol">Â¥</text>
          <text class="value-number">{{item.couponValue}}</text>
        </view>
        <view class="coupon-condition">
          æ»¡{{item.couponMinAmount}}å¯ç”¨
        </view>
      </view>
      
      <!-- ä¼˜æƒ åˆ¸å³ä¾§ -->
      <view class="coupon-right">
        <view class="coupon-name">{{item.couponName}}</view>
        <view class="coupon-desc">{{item.couponDescription}}</view>
        <view class="coupon-date">
          {{item.receivedAt}} - {{item.expiredAt}}
        </view>
        <view class="coupon-status">
          <text class="status-text {{item.status === 0 ? 'available' : item.status === 1 ? 'used' : 'expired'}}">
            {{item.statusDesc}}
          </text>
        </view>
      </view>
      
      <!-- ä¼˜æƒ åˆ¸çŠ¶æ€é®ç½© -->
      <view class="coupon-mask" wx:if="{{item.status !== 0}}">
        <text class="mask-text">{{item.status === 1 ? 'å·²ä½¿ç”¨' : 'å·²è¿‡æœŸ'}}</text>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{coupons.length === 0}}">
    <view class="empty-icon">ğŸ“‹</view>
    <text class="empty-text">æš‚æ— ä¼˜æƒ åˆ¸</text>
    <button class="btn-get-coupon" bindtap="goToCouponCenter">å»é¢†åˆ¸ä¸­å¿ƒ</button>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-bar">
    <button class="btn-coupon-center" bindtap="goToCouponCenter">é¢†åˆ¸ä¸­å¿ƒ</button>
  </view>
</view> 